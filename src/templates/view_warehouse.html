{% extends "base.html" %}

{% block title %}{{ warehouse.name }} - Warehouse Manager{% endblock %}

{% block content %}
<div class="card">
    <h2>{{ warehouse.name }}</h2>

    {% set varasto = warehouse.varasto %}
    {% set fill_percent = (varasto.saldo / varasto.tilavuus * 100)
                          if varasto.tilavuus > 0 else 0 %}

    <div class="progress-bar">
        <div class="progress-bar-fill"
             style="width: {{ fill_percent }}%;"></div>
    </div>

    <div class="stats">
        <div class="stat">
            <div class="stat-value">{{ varasto.saldo|round(2) }}</div>
            <div class="stat-label">Current Balance</div>
        </div>
        <div class="stat">
            <div class="stat-value">{{ varasto.tilavuus|round(2) }}</div>
            <div class="stat-label">Capacity</div>
        </div>
        <div class="stat">
            <div class="stat-value">{{ varasto.paljonko_mahtuu()|round(2) }}</div>
            <div class="stat-label">Available Space</div>
        </div>
    </div>
</div>

<div class="card">
    <h2>Add Items</h2>
    <form method="POST"
          action="{{ url_for('add_to_warehouse', warehouse_id=warehouse.id) }}"
          class="inline-form">
        <input type="number" name="amount" step="0.01" min="0.01"
               placeholder="Amount to add" required>
        <button type="submit" class="btn btn-success">Add</button>
    </form>
</div>

<div class="card">
    <h2>Remove Items</h2>
    <form method="POST"
          action="{{ url_for('remove_from_warehouse',
                             warehouse_id=warehouse.id) }}"
          class="inline-form">
        <input type="number" name="amount" step="0.01" min="0.01"
               placeholder="Amount to remove" required>
        <button type="submit" class="btn btn-primary">Remove</button>
    </form>
</div>

<div class="actions">
    <a href="{{ url_for('edit_warehouse', warehouse_id=warehouse.id) }}"
       class="btn btn-primary">Edit Warehouse</a>
    <a href="{{ url_for('index') }}" class="btn btn-secondary">Back to List</a>
    <form method="POST"
          action="{{ url_for('delete_warehouse', warehouse_id=warehouse.id) }}"
          style="display: inline;"
          onsubmit="return confirm('Are you sure you want to delete this warehouse?');">
        <button type="submit" class="btn btn-danger">Delete</button>
    </form>
</div>
{% endblock %}
